{{ header }}
<script>window.langtext = {
    text_change_password: {{ text_change_password|json_encode }},
    entry_password_current: {{ entry_password_current|json_encode }},
    entry_password_new: {{ entry_password_new|json_encode }},
    entry_password_confirm: {{ entry_password_confirm|json_encode }},
    button_change_password: {{ button_change_password|json_encode }},
    text_add_address: {{ text_add_address|json_encode }},
    text_edit_address: {{ text_edit_address|json_encode }},
    text_fullname: {{ text_fullname|json_encode }},
    text_phone: {{ text_phone|json_encode }},
    text_type_address: {{ text_type_address|json_encode }},
    text_type_home: {{ text_type_home|json_encode }},
    text_type_company: {{ text_type_company|json_encode }},
    text_province_city: {{ text_province_city|json_encode }},
    text_choose_province_city: {{ text_choose_province_city|json_encode }},
    text_district: {{ text_district|json_encode }},
    text_choose_district: {{ text_choose_district|json_encode }},
    text_choose_wards: {{ text_choose_wards|json_encode }},
    text_address: {{ text_address|json_encode }},
    text_example_address: {{ text_example_address|json_encode }},
    text_use_as_default: {{ text_use_as_default|json_encode }},
    text_cancel: {{ text_cancel|json_encode }},
  };</script>
<script>window.orderInfo={{ orderInfo|json_encode }};</script>
<main ng-controller="CheckoutPaymentCtr" ng-init="init()" style="display: none" ng-style="{'display':inited?'':'none'}">
  <form name="form" novalidate autocomplete="off">
    <div class="wid_block_payment row no-gutters pb-0">
      <div class="box-checkout-header col-12 col-md-8 border-right">
        <div class="section-bill-info">
          <div class="border-bottom py-2 py-xl-4 px-2 px-xl-5 px-xxl-13">
            <div class="bg-white position-relative">
              <div class="d-flex flex-column flex-xl-row py-3 py-xl-0 justify-content-between align-items-center"><a class="py-4 py-xl-1 navbar-brand" href="/"><img src="{{ logo }}" class="img-fluid" style="object-fit: contain"></a>
                <div class="order-process ml-md-3">
                  <div class="d-flex align-items-baseline align-items-md-center font-weight-bold">
                    <div class="progress-item d-flex flex-column flex-md-row justify-content-center align-items-center">
                      <div class="icon_process mr-md-2"><span class="p-2 text-white bg-dark rounded-circle fa fa-shopping-bag"></span></div>
                      <a class="progress-link text-center" style="white-space: nowrap">{{ text_cart }}</a>
                    </div>
                    <hr class="d-md-none" width="30px" color="#0F1F2A">
                    <div class="progress-item d-flex flex-column flex-md-row justify-content-center align-items-center">
                      <hr class="d-none d-md-block mx-2" width="30px" color="#0F1F2A">
                      <div class="icon_process mr-md-2"><span class="p-2 text-white bg-dark rounded-circle fa fa-info-circle"></span></div>
                      <a class="progress-link text-center" style="width: 90px">{{ text_checkout_shipping_info }}</a>
                    </div>
                    <hr class="d-md-none" width="30px" color="#0F1F2A">
                    <div class="progress-item active d-flex flex-column flex-md-row justify-content-center align-items-center">
                      <hr class="d-none d-md-block mx-2" width="30px" color="#0F1F2A">
                      <div class="icon_process mr-md-2"><span class="p-2 text-white bg-dark rounded-circle fa fa-credit-card"></span></div>
                      <a class="progress-link text-center">{{ text_checkout_payment_method }}</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-content mt-4 mt-xl-8 px-2 px-xl-5 px-xxl-13 overflow-hidden">
            <div class="tab-pane fadein show active">
              <div class="pay_method">
                <h4 class="font-4 font-weight-bold mb-4">{{ text_payment_choose_method }}<!-- text_payment_choose_method --></h4>
                <div class="row">
                  <div class="col-12 col-md-6 pb-3 pb-md-6" ng-if="!data.no_cod">
                    <label class="cus-checkmark mb-0 col-12 pr-0 border rounded-lg h-100 pl-0" ng-class="{'active': !data.no_cod}">
                      <div class="p-4 border-bottom font-weight-bold ">
                        <div class="position-relative font-4">
                          <input type="radio" name="payment_code" ng-model="params.payment_code" ng-value="'cod'" ng-change="changePaymentMethod()">
                          <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g id="Group_20451" data-name="Group 20451" transform="translate(-978.98 -207.379)"><path id="Path_28049" data-name="Path 28049" d="M1003.758,216.227a1.587,1.587,0,0,1-.725.729c-2.228,1.29-4.452,2.587-6.682,3.875a2.879,2.879,0,0,1-3.048.006q-6.4-3.68-12.8-7.375a2.471,2.471,0,0,1-.368-.249.759.759,0,0,1,.031-1.272,3.047,3.047,0,0,1,.332-.219c2.245-1.308,4.486-2.623,6.739-3.916a2.849,2.849,0,0,1,2.988,0q6.424,3.689,12.836,7.4a1.559,1.559,0,0,1,.692.7Zm-20.787-2.7c.05.034.081.058.113.077q4.934,2.849,9.867,5.7a.263.263,0,0,0,.293-.009,2.827,2.827,0,0,1,2.954.118.234.234,0,0,0,.291,0q1.941-1.131,3.884-2.258c.049-.029.094-.065.155-.108-.45-.211-.919-.416-.926-.97s.479-.758.914-.977c-3.368-1.946-6.7-3.874-10.042-5.8a.3.3,0,0,0-.245.012,2.891,2.891,0,0,1-2.943.015.288.288,0,0,0-.334.006q-1.9,1.109-3.8,2.211c-.056.033-.109.072-.174.116C983.932,212.1,984.156,212.925,982.971,213.522Z" transform="translate(-0.778 0)" fill="#0096c7"/><path id="Path_28050" data-name="Path 28050" d="M994.437,456.084a4.388,4.388,0,0,1-.782-.27q-7.02-4.036-14.029-8.089c-.158-.091-.327-.189-.3-.4s.194-.3.381-.368a1.368,1.368,0,0,1,1.187.156l7.6,4.385q2.869,1.654,5.735,3.312a.343.343,0,0,0,.4,0q3.518-2.051,7.041-4.093a1.317,1.317,0,0,1,1.186-.137c.175.066.333.153.358.359s-.132.317-.291.409l-6.657,3.869c-.344.2-.679.418-1.035.594A6.642,6.642,0,0,1,994.437,456.084Z" transform="translate(-0.322 -224.705)" fill="#0096c7"/><path id="Path_28051" data-name="Path 28051" d="M980.14,366.143a5.538,5.538,0,0,1,.79.309q6.644,3.819,13.277,7.657a.392.392,0,0,0,.46,0q3.506-2.047,7.02-4.08a1.306,1.306,0,0,1,1.187-.122c.175.068.332.156.349.366s-.138.3-.289.389l-5.969,3.468c-.56.325-1.121.649-1.679.977a1.566,1.566,0,0,1-1.685,0l-13.943-8.048c-.164-.094-.351-.189-.329-.411s.214-.331.419-.386c.119-.032.243-.047.365-.07Z" transform="translate(-0.328 -148.955)" fill="#0096c7"/><path id="Path_28052" data-name="Path 28052" d="M994.22,336.341a4.391,4.391,0,0,1-.782-.27q-7.021-4.033-14.031-8.084c-.158-.091-.324-.195-.3-.405s.194-.3.38-.366a1.362,1.362,0,0,1,1.187.156l7.52,4.338q2.909,1.677,5.816,3.358a.341.341,0,0,0,.4,0q3.527-2.058,7.061-4.1a1.292,1.292,0,0,1,1.142-.136c.182.066.358.146.387.362s-.149.326-.312.421q-2.873,1.671-5.747,3.339c-.641.372-1.275.756-1.926,1.11A5.307,5.307,0,0,1,994.22,336.341Z" transform="translate(-0.116 -112.362)" fill="#0096c7"/><path id="Path_28053" data-name="Path 28053" d="M979.812,406.149a5.533,5.533,0,0,1,.778.308q6.645,3.822,13.278,7.663a.39.39,0,0,0,.459-.008q3.506-2.049,7.019-4.086a1.325,1.325,0,0,1,1.164-.134c.181.064.356.151.374.372s-.151.311-.307.4l-5.5,3.2c-.722.419-1.442.841-2.166,1.257a1.515,1.515,0,0,1-1.6.007q-7-4.03-13.991-8.067a1.261,1.261,0,0,1-.175-.116.315.315,0,0,1,.02-.56A3.9,3.9,0,0,1,979.812,406.149Z" transform="translate(0 -186.489)" fill="#0096c7"/><path id="Path_28054" data-name="Path 28054" d="M1109.125,285.212a6.275,6.275,0,0,1-2.611-.687,3.834,3.834,0,0,1-.62-.417,1.666,1.666,0,0,1,.025-2.772,4.637,4.637,0,0,1,2.218-.931,6.566,6.566,0,0,1,3.807.4,4.038,4.038,0,0,1,1,.631,1.637,1.637,0,0,1-.073,2.7,4.723,4.723,0,0,1-2.354.959C1110.06,285.165,1109.591,285.176,1109.125,285.212Zm-2.029-1.441c.225.121.4.357.647.193a.967.967,0,0,1,.8-.093,1.732,1.732,0,0,0,1.372-.216.527.527,0,0,0,.174-.8c-.085-.14-.188-.269-.27-.41-.119-.2-.047-.346.19-.372a.469.469,0,0,1,.273.035c.211.126.407.276.609.415.073.05.158.148.22.136a6.168,6.168,0,0,0,.66-.2l-.452-.5.344-.263c-.216-.116-.374-.339-.595-.2a1.059,1.059,0,0,1-.827.076,1.674,1.674,0,0,0-1.278.232.462.462,0,0,0-.169.667c.08.15.188.287.282.43.182.277.089.458-.247.475a.927.927,0,0,1-.852-.405c-.219-.34-.454-.3-.743-.167a.641.641,0,0,1-.067.02c-.15.049-.192.137-.073.254s.277.247.432.383Z" transform="translate(-118.391 -68.41)" fill="#0096c7"/><path id="Path_28055" data-name="Path 28055" d="M1085.169,269.449a1.513,1.513,0,0,1-.945-.278.462.462,0,0,1-.007-.8,1.741,1.741,0,0,1,1.891.006.465.465,0,0,1,0,.789A1.476,1.476,0,0,1,1085.169,269.449Z" transform="translate(-98.524 -56.965)" fill="#0096c7"/><path id="Path_28056" data-name="Path 28056" d="M1226.7,349.737a1.469,1.469,0,0,1,.9.277.465.465,0,0,1,0,.8,1.731,1.731,0,0,1-1.876,0,.467.467,0,0,1,0-.8A1.522,1.522,0,0,1,1226.7,349.737Z" transform="translate(-231.292 -133.562)" fill="#0096c7"/></g></svg>
                          {{ text_pay_cod?text_pay_cod:'Tiền mặt (COD)' }}<!-- text_pay_cod --><span class="checkmark float-right"></span>
                        </div>
                      </div>
                      <div class="p-4">
                        <p class="mb-2">{{ text_pay_cod_desc }} <!-- text_pay_cod_desc --></p>
                      </div>
                    </label>
                  </div>
                  <!-- Tạm ẩn thanh toán Momo -->
                  {#<div class="col-12 col-md-6 pb-3 pb-md-6">
                    <label class="cus-checkmark mb-0 col-12 pr-0 border rounded-lg h-100 pl-0">
                      <div class="p-4 border-bottom font-weight-bold ">
                        <div class="position-relative font-4">
                          <input type="radio" name="payment_code" ng-model="params.payment_code" ng-value="'momo'" ng-change="changePaymentMethod()"><img src="/assets/images/icons/momo.png" class="mr-3">{{ text_momo?text_momo:'Ví Momo' }}<!-- text_momo --><span class="checkmark float-right"></span>
                        </div>
                      </div>
                      <div class="p-4">
                        <p class="mb-2">Thanh Toán Bằng Ví Điện Tử Momo</p>
                      </div>
                    </label>
                  </div>#}
                  <div class="col-12 col-md-6 pb-3 pb-md-6">
                    <label class="cus-checkmark mb-0 col-12 pr-0 border rounded-lg h-100 pl-0" ng-class="{'active': data.no_cod}">
                      <div class="p-4 border-bottom font-weight-bold">
                        <div class="position-relative font-4">
                          <input type="radio" name="payment_code" ng-model="params.payment_code" ng-value="'bank_transfer'" ng-change="changePaymentMethod()">
                          <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><g id="Mask_Group_701" data-name="Mask Group 701" transform="translate(-120 -411)" clip-path="url(#clip-path)"><g id="Group_20453" data-name="Group 20453" transform="translate(-1157 -225.821)"><path id="Path_28059" data-name="Path 28059" d="M1412.136,981.561V979.5h-.3c-1.844,0-3.687.007-5.53,0a4.671,4.671,0,0,1-4.633-3.778,8.844,8.844,0,0,1-.1-1.654,7.578,7.578,0,0,0,6.553,3.066,7.467,7.467,0,0,0,6.177-3.761c.5.313.992.622,1.485.933l3.823,2.41a1.171,1.171,0,0,0,.123.06v.047a1.461,1.461,0,0,0-.164.078q-3.6,2.268-7.2,4.539a1.047,1.047,0,0,0-.133.118Z" transform="translate(-118.73 -320.74)" fill="#0096c7"/><path id="Path_28060" data-name="Path 28060" d="M1407.955,761.352a6.155,6.155,0,1,1-6.163,6.119A6.149,6.149,0,0,1,1407.955,761.352Zm.605,3.352v-.789h-1.072c0,.221-.007.424,0,.625.007.143-.037.2-.188.226a2.3,2.3,0,0,0-1.276.64,1.518,1.518,0,0,0,.477,2.462,4.736,4.736,0,0,0,.641.218c.376.1.759.181,1.135.282.142.038.3.1.286.291-.011.207-.192.244-.341.253a3.064,3.064,0,0,1-.815-.02c-.445-.1-.878-.249-1.336-.384l-.557,1.261a1.468,1.468,0,0,0,.276.143c.5.132.991.265,1.492.371.153.032.217.068.208.229-.012.2,0,.4,0,.609h1.09c0-.225.007-.442,0-.658-.006-.142.038-.2.187-.233a2.354,2.354,0,0,0,1.045-.5,1.505,1.505,0,0,0-.367-2.574,8.585,8.585,0,0,0-.985-.291c-.292-.081-.591-.141-.879-.235a.293.293,0,0,1-.172-.216c.006-.087.1-.179.176-.246a.417.417,0,0,1,.2-.061,2.629,2.629,0,0,1,1.354.172c.152.054.3.12.464.186l.538-1.3A4.262,4.262,0,0,0,1408.561,764.7Z" transform="translate(-118.942 -118.655)" fill="#0096c7"/><path id="Path_28061" data-name="Path 28061" d="M1284.6,636.861v2.073h.287c1.82,0,3.64-.005,5.46,0a4.729,4.729,0,0,1,4.582,3.255,5.614,5.614,0,0,1,.212,2.215,7.619,7.619,0,0,0-12.711.665L1277,641.65Z" fill="#0096c7"/></g></g></svg>
                          {{ text_transfer_money?text_transfer_money:'Chuyển khoản' }}<!-- text_transfer_money --><span class="checkmark float-right"></span>
                        </div>
                      </div>
                      <div class="p-4">
                        <p class="mb-2">{{ text_transfer_money_desc }} <!-- text_transfer_money_desc --></p>
                      </div>
                    </label>
                  </div>
                  <div class="col-12 col-md-6 pb-3 pb-md-6">
                    <label class="cus-checkmark mb-0 col-12 pr-0 border rounded-lg h-100 pl-0">
                      <div class="p-4 border-bottom font-weight-bold ">
                        <div class="position-relative font-4">
                          <input type="radio" name="payment_code" ng-model="params.payment_code" ng-value="'domestic'" ng-change="changePaymentMethod()">
                          <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><g id="Mask_Group_700" data-name="Mask Group 700" transform="translate(-664 -411)" clip-path="url(#clip-path)"><g id="Group_20452" data-name="Group 20452" transform="translate(-833.78 493.683)"><path id="Path_28057" data-name="Path 28057" d="M1497.78-65.058v-11.25a.938.938,0,0,0,.046-.127,2.748,2.748,0,0,1,2.73-2.249q9.219-.008,18.438,0a2.744,2.744,0,0,1,2.784,2.8q0,5.2,0,10.4a2.863,2.863,0,0,1-.069.649,2.745,2.745,0,0,1-2.759,2.153q-4.6,0-9.207,0-4.557,0-9.114,0a2.7,2.7,0,0,1-2.492-1.422A6.071,6.071,0,0,1,1497.78-65.058Zm19.453-5.966.046.019q0,1.745,0,3.491a.752.752,0,0,0,.759.824.751.751,0,0,0,.74-.82q0-3.163,0-6.327a.773.773,0,0,0-.557-.821.772.772,0,0,0-.892.438q-.589,1.025-1.174,2.052c-.036.064-.078.124-.127.2-.045-.072-.08-.123-.11-.177q-.6-1.046-1.2-2.093a.768.768,0,0,0-.6-.436.74.74,0,0,0-.84.827q0,3.163,0,6.327c0,.055,0,.109.005.164a.737.737,0,0,0,.678.661.751.751,0,0,0,.815-.816c0-1.086,0-2.171,0-3.257,0-.08.007-.16.014-.311.2.348.359.631.521.912a.777.777,0,0,0,1.418,0C1516.9-70.447,1517.068-70.736,1517.233-71.024Zm-12.949,1.6c0,.668,0,1.307,0,1.946a.736.736,0,0,0,.725.784.737.737,0,0,0,.77-.767c.007-1.585.029-3.171-.007-4.756a2.468,2.468,0,0,0-2.556-2.463,2.493,2.493,0,0,0-2.437,2.564q0,2.308,0,4.615a.749.749,0,0,0,.752.807.749.749,0,0,0,.747-.813c0-.4,0-.8,0-1.195v-.722Zm4.242-3.761v.311q0,2.636,0,5.271a1.507,1.507,0,0,0,.032.348.744.744,0,0,0,1.192.4.815.815,0,0,0,.277-.689q-.006-2.671,0-5.342v-.3c.35,0,.67.009.988,0a.762.762,0,0,0,.768-.754.748.748,0,0,0-.775-.741c-1.156-.005-2.312-.008-3.467.006a.923.923,0,0,0-.474.16.7.7,0,0,0-.252.792.746.746,0,0,0,.718.536C1507.852-73.172,1508.171-73.18,1508.526-73.18Z" fill="#0096c7"/><path id="Path_28058" data-name="Path 28058" d="M1569.6,11.558c0-.454-.017-.891,0-1.325a.976.976,0,0,1,.937-.9.944.944,0,0,1,1.026.819c.046.46.01.929.01,1.411Z" transform="translate(-67.313 -82.504)" fill="#0096c7"/></g></g></svg>
                          {{ text_pay_atm?text_pay_atm:'Thẻ ATM nội địa/ Internet Banking' }}<!-- text_pay_atm --><span class="checkmark float-right"></span>
                        </div>
                      </div>
                      <div class="p-4">
                        <p class="mb-2">{{ text_pay_atm_desc }} <!-- text_pay_atm_desc --></p>
                      </div>
                    </label>
                  </div>
                  <div class="col-12 col-md-6 pb-3 pb-md-6">
                    <label class="cus-checkmark mb-0 col-12 pr-0 border rounded-lg h-100 pl-0">
                      <div class="p-4 border-bottom font-weight-bold ">
                        <div class="position-relative font-4">
                          <input type="radio" name="payment_code" ng-model="params.payment_code" ng-value="'international'" ng-change="changePaymentMethod()">
                          <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><g id="Mask_Group_702" data-name="Mask Group 702" transform="translate(-120 -611)" clip-path="url(#clip-path)"><g id="Group_20454" data-name="Group 20454" transform="translate(-442.537 -281.811)"><path id="Path_28062" data-name="Path 28062" d="M562.537,1053.957v-12.141a.354.354,0,0,0,.029-.063,1.412,1.412,0,0,1,1.54-1.233q10.438,0,20.876,0a1.417,1.417,0,0,1,1.539,1.53q0,5.846,0,11.691a1.946,1.946,0,0,1-.061.509,1.406,1.406,0,0,1-1.474,1.02H564.132c-.07,0-.141,0-.211,0a1.41,1.41,0,0,1-1.319-1.044C562.578,1054.136,562.559,1054.046,562.537,1053.957Zm4.773-10.652c-.422,0-.843,0-1.265,0a1.161,1.161,0,0,0-1.209,1.21q-.006.972,0,1.944a1.163,1.163,0,0,0,1.22,1.223q1.253.008,2.507,0a1.152,1.152,0,0,0,1.219-1.176c.016-.679.018-1.359,0-2.038a1.147,1.147,0,0,0-1.206-1.164C568.153,1043.3,567.731,1043.305,567.31,1043.305Zm-2.551,7.524v1.376H568.2v-1.376Zm8.826,0h-3.45v1.374h3.45Zm5.36,0H575.5v1.376h3.447Zm5.378.006h-3.448v1.371h3.448Z" transform="translate(0 -138.459)" fill="#0096c7"/><path id="Path_28063" data-name="Path 28063" d="M674.633,892.811a2.46,2.46,0,0,1,1.04.719c.882.9,1.776,1.78,2.676,2.68-.043.054-.076.1-.117.147q-1.953,2.072-3.911,4.139a.522.522,0,0,1-.334.157q-3.9.013-7.8.006c-.059,0-.118-.01-.215-.018.086-.092.146-.16.21-.223q3.454-3.455,6.907-6.913a2.345,2.345,0,0,1,1.031-.694Z" transform="translate(-96.955)" fill="#0096c7"/><path id="Path_28064" data-name="Path 28064" d="M827.867,967.265l3.2-3.4,1.111,1.117c-.179.191-.391.419-.6.645-.471.5-.941,1-1.417,1.5a.388.388,0,0,1-.228.133C829.27,967.27,828.607,967.265,827.867,967.265Z" transform="translate(-248.715 -66.606)" fill="#0096c7"/><path id="Path_28065" data-name="Path 28065" d="M894.16,998.508l1.178-1.252,1.325,1.349h-2.483Z" transform="translate(-310.856 -97.904)" fill="#0096c7"/><path id="Path_28066" data-name="Path 28066" d="M623.982,1107.7v1.54h-2.117v-1.54Z" transform="translate(-55.613 -201.435)" fill="#0096c7"/></g></g></svg>
                          {{ text_pay_visa?text_pay_visa:'Visa, Master, JCB' }}<!-- text_pay_visa --><span class="checkmark float-right"></span>
                        </div>
                      </div>
                      <div class="p-4">
                        <p class="mb-2">{{ text_pay_visa_desc }} <!-- text_pay_visa_desc --></p>
                      </div>
                    </label>
                  </div>
                </div>
              </div>
              <div class="pb-3 pb-md-6">
                <h4 class="font-4 font-weight-bold mb-4">Điều khoản và điều kiện thanh toán</h4>
                <div class="form-group" ng-class="{'has-error': !params.agree && error_agree}">
                  <div class="custom-control custom-checkbox mb-2">
                    <input type="checkbox" id="input_agree" name="agree" ng-model="params.agree" class="custom-control-input">
                    <label class="custom-control-label" for="input_agree">Tôi đồng ý với điều khoản và điều kiện thanh toán</label>
                  </div>
                  <div class="bg-light border" style="overflow-y:auto;max-height:300px;margin-bottom:10px;padding:5px 15px;">{{ onepay_terms }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="section_cart_info col-12 col-md-4">
        <div class="box-total-bill">
          <div class="px-6 px-xl-10">
            <div class="border-bottom pt-6 pt-md-10 total-cart-item">
              <div class="cart-item pb-8" ng-repeat="item in data.products" ng-if="item.type!='I'">
                <div class="d-flex flex-xl-row align-items-xl-center font-13">
                  <div class="d-flex item-info">
                    <div class="position-relative" ng-if="item.type!='I'">
                      <span class="embed-responsive embed-responsive-1by1 bg-cover" style="width: 80px; height: 80px"><span class="embed-responsive-item"><img ng-src="{{ '{{ item.product.thumb_url }}' }}" alt="{{ '{{ item.product.name }}' }}" class="w-100"></span></span>
                      <quantity><span ng-bind="item.quantity"></span></quantity>
                    </div>
                    <div class="px-3 px-xl-4 d-flex flex-column justify-content-between">
                      <div ng-if="item.product.stock_status == 'out_of_stock'" class="badge badge-danger fs-6">{{ text_out_of_stock }}</div>
                      <div ng-if="item.product.stock_status == 'pre_order'" class="badge badge-warning fs-6">{{ text_pre_order }}</div>
                      <p class="mb-0 mb-xl-auto limit-text-2" ng-bind="item.product.long_name?item.product.long_name:item.product.name"></p>
                      {#<p class="text-gray mb-1 mb-xl-auto">Combo</p>#}
                      <p class="d-block d-xl-none text-primary mb-0" ng-if="item.type!='G'" ng-bind="(item.total|formatCurrency)+'₫'"></p>
                      <p class="d-block d-xl-none text-primary mb-0 text-nowrap" ng-if="item.type=='G'" ng-bind="(item.coins|number:'':0)+' coin'"></p>
                    </div>
                  </div>
                  <div class="d-none d-xl-block item-price pl-xl-8">
                    <div class="text-primary font-4">
                      <span ng-if="item.type!='G'" ng-bind="(item.total|formatCurrency)+'₫'"></span>
                      <span class="text-nowrap" ng-if="item.type=='G'" ng-bind="(item.coins|number:'':0)+' coin'"></span>
                    </div>
                  </div>
                </div>
                <div ng-if="item.gifts&&item.gifts.length" ng-repeat="gift in item.gifts">
                  <div class="row no-gutters mt-2">
                    <div class="col-12 col-sm-auto pr-sm-4" style="width: 80px;box-sizing: content-box;"></div>
                    <div class="col-auto pr-2 pr-sm-4">
                      <div class="img mx-auto" style="width: 40px; height: 40px;"><span class="embed-responsive embed-responsive-1by1 bg-cover"><span class="embed-responsive-item"><a href="{{ '{{ gift.href }}' }}"><img ng-src="{{ '{{ gift.small_url }}' }}" alt="{{ '{{ gift.long_name }}' }}" class="w-100 img-cover"></a></span></span></div>
                    </div>
                    <div class="col font-13">
                      <b><span ng-bind="gift.quantity"></span>x </b>
                      <a href="{{ '{{ gift.href }}' }}" class="font-weight-normal" ng-bind="gift.long_name?gift.long_name:gift.name"></a>
                      <span class="d-block text-green">Quà tặng</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="cart-item pb-8" ng-repeat="item in data.gift_orders.current_gifts">
                <div class="d-flex flex-xl-row align-items-xl-center font-13">
                  <div class="d-flex item-info">
                    <div class="position-relative">
                      <span class="embed-responsive embed-responsive-1by1 bg-cover" style="width: 80px; height: 80px"><span class="embed-responsive-item"><img ng-src="{{ '{{ item.thumb_url }}' }}" alt="{{ '{{ item.long_name?item.long_name:item.name }}' }}" class="w-100"></span></span>
                      <quantity><span ng-bind="item.quantity"></span></quantity>
                    </div>
                    <div class="px-3 px-xl-4 d-flex flex-column justify-content-between">
                      <p class="mb-0 mb-xl-auto limit-text-2" ng-bind="item.long_name?item.long_name:item.name"></p>
                      <p class="d-block d-xl-none text-teal mb-0">Quà tặng</p>
                    </div>
                  </div>
                  <div class="d-none d-xl-block item-price pl-xl-8">
                    <div class="text-teal font-4">
                      <span class="text-nowrap">Quà tặng</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="px-6 px-xl-10">
            <div class="border-bottom py-md-6 py-3">
              <div class="wid_voucher mb-3">
                <a ng-click="selectCoupon()" class="d-flex justify-content-between align-items-center border py-2 px-3 cursor-pointer"><span class="text-gray font-13">{{ entry_coupon }}</span><span class="fa fa-angle-right"></span></a>
              </div>
              <div ng-if="data.coupon || data.totals.voucher_code" class="row">
                <div class="col-4 d-flex align-items-center">
                  <div class="position-relative coupon_tag d-flex flex-column py-2 px-4">
                    <span class="text-primary font-weight-bold text-center" ng-if="data.coupon" ng-bind="data.coupon.code"></span>
                    <span class="text-primary font-weight-bold text-center" ng-if="data.totals.voucher_code" ng-bind="data.totals.voucher_code"></span>
                  </div>
                  <div class="pl-2 cancel-coupon"><a ng-click="clearCoupon()" class="cursor-pointer"><span class="fa fa-times-circle"></span></a></div>
                </div>
              </div>
            </div>
          </div>
          {#<div class="px-6 px-xl-10">
            <div class="wid_voucher mt-8 mb-3">
              <h4 class="font-weight-bold text-uppercase mb-3 font-4">Mã voucher</h4>
              <div class="form-group mb-0">
                <div class="input-group">
                  <input type="text" ng-model="data.totals.voucher_code" value="" placeholder="Mã voucher" class="form-control">
                  <div class="input-group-append"><button class="btn btn-secondary text-white" type="button" ng-click="addVoucher()">OK</button></div>
                </div>
              </div>
            </div>
          </div>#}
          {# {% if user_invite_status %}
            <div ng-if="currentUser" class="px-6 px-xl-10">
              <div class="wid_voucher mt-8 mb-3">
                <h4 class="font-weight-bold text-uppercase mb-3 font-4">Mã giới thiệu</h4>
                <div class="form-group mb-0">
                  <input type="text" ng-model="params.referral_code" placeholder="" class="form-control">
                </div>
              </div>
            </div>
          {% endif %} #}
          <div class="px-6 px-xl-10">
            <div class="py-md-6 py-3">
              <div class="d-flex flex-column">
                <p>Tạm tính <b class="float-right" ng-bind="((data.totals.sub_total-data.totals.included_total)|formatCurrency)+'₫'"></b></p>
                <p ng-if="data.totals.coins">Go Mart coin sử dụng <b class="float-right text-primary" ng-bind="'-'+(data.totals.coins|number)+' Go Mart coin'"></b></p>
                <p ng-if="data.totals.shipping_fee">Phí vận chuyển<b class="float-right">+<span ng-bind="(data.totals.shipping_fee|formatCurrency)+'₫'"></span></b></p>
                <p ng-if="data.totals.shipping_discount">Ưu đãi thành viên<b class="float-right">-<span ng-bind="(data.totals.shipping_discount|formatCurrency)+'₫'"></span></b></p>
                <p ng-if="data.totals.included_total">Phí dịch vụ kèm theo<b class="float-right">+<span ng-bind="(data.totals.included_total|formatCurrency)+'₫'"></span></b></p>
                <p ng-if="data.totals.discount_total">Giảm giá<b class="float-right">-<span ng-bind="(data.totals.discount_total|formatCurrency)+'₫'"></span></b></p>
                <p ng-if="data.totals.voucher_total">Voucher<b class="float-right" ng-bind="'-'+(data.totals.voucher_total|formatCurrency:'':0)+'đ'"></b></p>
                <p ng-if="data.totals && currentUser">{{ text_coin_get }}<b class="float-right text-primary">+<span ng-bind="data.totals.total/1000|number:0"></span> Go Mart coin</b></p>
                <hr class="w-100 my-6">
                <div class="d-flex justify-content-between align-items-end font-weight-bold">
                  <div class="font-weight-bold">Tổng</div>
                  <div class="font-3" ng-bind="(data.totals.total|formatCurrency)+'₫'"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="section_button py-6 px-6 px-xl-10">
            <input type="hidden" ng-model="params.shipping_code" required>
            <div class="row position-relative" style="z-index: 1;">
              <div class="col-5"><a href="/checkout/shipping"><button type="button" class="cus_btn btn_primary w-100">{{ button_return }}</button></a></div>
              <div class="col-7">
                {#<button type="button" class="button button-continue text-uppercase w-100"> {{ button_continue?button_continue:'Tiếp tục' }}<!-- button_buy_now --></button>#}
                <button type="button" class="cus_btn btn_white w-100" ng-click="confirm(form, $event)" data-loading-text="<span class='spinner-border spinner-border-sm'></span> {{ button_continue }}" data-reset-text=" {{ button_continue }}">Đặt hàng</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</main>
<script>
  $(document).ready(function() {
    setTimeout(function() {
      var heights = _.map($('.checkout_pay .checkout_item'), (el) => $(el).outerHeight(false));
      var maxHeight = _.max(heights);
      $('.checkout_pay .checkout_item').css('height', maxHeight + 'px');
    }, 500);

    $('label.cus-checkmark input').click(function () {
      $('label.cus-checkmark').removeClass('active');
      $(this).parents('.cus-checkmark').toggleClass('active')
    })
  })
</script>
{{ footer }}
